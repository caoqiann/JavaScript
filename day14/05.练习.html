<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>添加删除记录练习</title>
		<link rel="stylesheet" href="css/05.练习.css" />
		<script type="text/javascript">
			
	/*
	 * 点击超链接以后,超链接会跳转页面,这个是超链接的默认行为
	 * 但是此时不需要跳转,可以通过在响应函数的最后return false来取消默认行为
	 * 或者把<a>中的href值写成 javascript:;
	 * 
	 */

		function delA() {
		/*
		 * 删除之前弹出一个提示框
		 * 
		 * confirm()
		 * 	用于弹出一个带有确认和取消按钮的提示框
		 * 	需要一个字符串作为参数,该字符串将会作为提示文字显示出来
		 *  如果用户点击确认 则返回true,如果点击取消 则返回false
		 */
	
		//confirm("确认删除吗?");
	
		//获取tr
	
		var tr = this.parentNode.parentNode;

		//获取名字
		var name = tr.children[0].innerHTML;
		var flag = confirm("确认删除" + name + "吗?");
		// 点击超链接后删除超链接所在的行
	
		//删除tr
		if(flag == true) {
			tr.parentNode.removeChild(tr);
		}

						//点击谁 this就是谁
						//alert(this);
						
				return false;
	}

window.onload = function() {

		var allA = document.getElementsByTagName("a");
				/*
				 * for循环会在页面加载完成之后立即执行
				 * 	而响应函数会在超链接被点击时,for循环早已执行完毕
				 */
				for(var i = 0; i < allA.length; i++){
					allA[i].onclick = delA;
					
				/*
				 * submit
				 */
				
				var but = document.getElementById("addEmpButton");
				but.onclick = function(){
					//获取用户填写的信息
					//文本框中的内容就是value值
					var empName = document.getElementById("empName").value;
					var email = document.getElementById("email").value;
					var salary = document.getElementById("salary").value;
					
//					alert(empName+email+salary);
					
					//将获取到的信息创建到表格中
					var tr = document.createElement("tr");
					
					tr.innerHTML = "<td>"+empName+"</td>"+
									"<td>"+email+"</td>"+
									"<td>"+salary+"</td>"+
									"<td><a href='javascript:;'>Delete</a></td>";
									
					var employeeTable = document.getElementById("employeeTable");
					
					employeeTable.appendChild(tr);
					
					//获取刚刚添加的a
					var a = tr.getElementsByTagName("a")[0];
					a.onclick = delA;
				}
			}
			}
		</script>
	</head>
	<body>
		<div id="page">
			<div id="addlist">
				<table id="employeeTable">
					
			<tr>
				<th>Name</th>
				<th>Email</th>
				<th>Salary</th>
				<th>&nbsp;</th>
			</tr>
			
			<tr>
				<td>Tom</td>
				<td>tom@tom.com</td>
				<td>5000</td>
				<td><a href="deleteEmp?id=001">Delete</a></td>
			</tr>
			<tr>
				<td>Jerry</td>
				<td>jerry@jerry.com</td>
				<td>8000</td>
				<td><a href="deleteEmp?id=002">Delete</a></td>
			</tr>
			<tr>
				<td>Mary</td>
				<td>mary@mary.com</td>
				<td>6000</td>
				<td><a href="deleteEmp?id=003">Delete</a></td>
			</tr>
		</table>
			</div>
		<div id="write">
			<h4>添加新员工</h4>
			<table>
				
			<tr>
				<td class="word">name:</td>
				<td class="inp">
					<input type="text" name="empName" id="empName"/>
				</td>
			</tr>
			
			<tr>
				<td class="word">email:</td>
				<td class="inp">
					<input type="text" name="email" id="email"/>
				</td>
			</tr>
			
			<tr>
				<td class="word">salary:</td>
				<td class="inp">
					<input type="text" name="salary" id="salary"/>
				</td>
			</tr>
			
			<tr>
				<td colspan="2" align="center">
					<button id="addEmpButton" value="submit">
						Submit
					</button>
				</td>
			</tr>
		</table>
		</div>
		
		</div>
		
	</body>
</html>
